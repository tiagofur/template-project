# ==============================================
# STAGING ENVIRONMENT
# ==============================================
# Pre-production staging environment
# Mirrors production configuration with test data

# ==============================================
# üåç ENVIRONMENT
# ==============================================
NODE_ENV=staging
APP_ENV=staging
DEBUG=false
LOG_LEVEL=info

# ==============================================
# üåê APPLICATION URLS
# ==============================================
APP_NAME=My App Staging
APP_URL=https://staging.myapp.com
API_BASE_URL=https://staging-api.myapp.com/api
FRONTEND_URL=https://staging.myapp.com
BACKEND_URL=https://staging-api.myapp.com

# Ports (behind reverse proxy)
PORT=3000
FRONTEND_PORT=3000

# ==============================================
# üóÑÔ∏è DATABASE CONFIGURATION
# ==============================================
# PostgreSQL (Staging Database - Managed Service)
DB_HOST=staging-db.myapp.com
DB_PORT=5432
DB_NAME=myapp_staging
DB_USER=staging_user
DB_PASSWORD=${STAGING_DB_PASSWORD}
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}?sslmode=require

# MongoDB (Staging Database)
MONGODB_URI=${STAGING_MONGODB_URI}
MONGODB_DATABASE=myapp_staging
MONGODB_USERNAME=${STAGING_MONGODB_USER}
MONGODB_PASSWORD=${STAGING_MONGODB_PASSWORD}

# Redis Cache (Managed Redis)
REDIS_HOST=staging-redis.myapp.com
REDIS_PORT=6379
REDIS_URL=rediss://${REDIS_HOST}:${REDIS_PORT}
REDIS_PASSWORD=${STAGING_REDIS_PASSWORD}

# ==============================================
# üîê AUTHENTICATION & SECURITY
# ==============================================
# JWT Configuration (Staging Secrets - from Secrets Manager)
JWT_SECRET=${STAGING_JWT_SECRET}
JWT_ACCESS_SECRET=${STAGING_JWT_ACCESS_SECRET}
JWT_REFRESH_SECRET=${STAGING_JWT_REFRESH_SECRET}
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Session
SESSION_SECRET=${STAGING_SESSION_SECRET}
SESSION_MAX_AGE=86400000

# Encryption
ENCRYPTION_KEY=${STAGING_ENCRYPTION_KEY}

# ==============================================
# üåê CORS & SECURITY
# ==============================================
CORS_ORIGIN=https://staging.myapp.com
ALLOWED_ORIGINS=https://staging.myapp.com,https://staging-api.myapp.com

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=200

# Security Headers
HELMET_ENABLED=true
HSTS_MAX_AGE=31536000

# ==============================================
# ü§ñ AI SERVICES (Staging Keys)
# ==============================================
# OpenAI
OPENAI_API_KEY=${STAGING_OPENAI_API_KEY}
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# Anthropic Claude
ANTHROPIC_API_KEY=${STAGING_ANTHROPIC_API_KEY}

# Google AI
GOOGLE_AI_API_KEY=${STAGING_GOOGLE_AI_API_KEY}

# ==============================================
# üîß EXTERNAL SERVICES (Staging Keys)
# ==============================================
# GitHub Integration
GITHUB_TOKEN=${STAGING_GITHUB_TOKEN}
GITHUB_USERNAME=myapp-staging
GITHUB_REPO_DEFAULT=myapp-staging

# OAuth Providers
GOOGLE_CLIENT_ID=${STAGING_GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${STAGING_GOOGLE_CLIENT_SECRET}
GOOGLE_CALLBACK_URL=https://staging-api.myapp.com/auth/google/callback

GITHUB_CLIENT_ID=${STAGING_GITHUB_CLIENT_ID}
GITHUB_CLIENT_SECRET=${STAGING_GITHUB_CLIENT_SECRET}
GITHUB_CALLBACK_URL=https://staging-api.myapp.com/auth/github/callback

# ==============================================
# üìß EMAIL CONFIGURATION (Staging)
# ==============================================
SMTP_HOST=${STAGING_SMTP_HOST}
SMTP_PORT=587
SMTP_USER=${STAGING_SMTP_USER}
SMTP_PASSWORD=${STAGING_SMTP_PASSWORD}
SMTP_FROM=noreply-staging@myapp.com
EMAIL_ENABLED=true

# ==============================================
# ‚òÅÔ∏è CLOUD STORAGE (Staging)
# ==============================================
# AWS S3 (Staging Bucket)
AWS_ACCESS_KEY_ID=${STAGING_AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${STAGING_AWS_SECRET_ACCESS_KEY}
AWS_REGION=us-east-1
AWS_S3_BUCKET=myapp-staging-assets

# Supabase (Staging Project)
SUPABASE_URL=${STAGING_SUPABASE_URL}
SUPABASE_ANON_KEY=${STAGING_SUPABASE_ANON_KEY}
SUPABASE_SERVICE_ROLE_KEY=${STAGING_SUPABASE_SERVICE_KEY}

# ==============================================
# üí≥ PAYMENT PROVIDERS (Test Mode)
# ==============================================
# Stripe (Test Keys in Staging)
STRIPE_PUBLIC_KEY=${STAGING_STRIPE_PUBLIC_KEY}
STRIPE_SECRET_KEY=${STAGING_STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STAGING_STRIPE_WEBHOOK_SECRET}

# ==============================================
# üìä MONITORING & ANALYTICS (Staging)
# ==============================================
# Sentry (Staging Environment)
SENTRY_DSN=${STAGING_SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
SENTRY_ENABLED=true

# Analytics (Staging)
ANALYTICS_ID=${STAGING_ANALYTICS_ID}
ANALYTICS_ENABLED=true

# Application Performance Monitoring
APM_ENABLED=true
NEW_RELIC_LICENSE_KEY=${STAGING_NEW_RELIC_KEY}

# ==============================================
# üé≠ FEATURE FLAGS
# ==============================================
FEATURE_NEW_UI=true
FEATURE_BETA_FEATURES=true
FEATURE_EXPERIMENTAL=true
FEATURE_ANALYTICS=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_WEBSOCKETS=true
FEATURE_PAYMENT_PROCESSING=true

# ==============================================
# üß™ TESTING & DEBUGGING
# ==============================================
# Testing (Limited in staging)
TEST_TIMEOUT=10000
TEST_DATABASE_URL=${STAGING_TEST_DB_URL}

# Browser Testing
PLAYWRIGHT_HEADLESS=true
PLAYWRIGHT_BROWSER=chromium
PLAYWRIGHT_TIMEOUT=30000

# Debugging (Limited)
DEBUG_SQL=false
DEBUG_API=false
VERBOSE_LOGGING=false

# ==============================================
# üîÑ CACHE CONFIGURATION
# ==============================================
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_PREFIX=staging:

# ==============================================
# üìù LOGGING
# ==============================================
LOG_FILE=/var/log/myapp/staging.log
LOG_FORMAT=json
LOG_SQL_QUERIES=false
LOG_HTTP_REQUESTS=true

# ==============================================
# üöÄ BUILD & DEPLOYMENT
# ==============================================
BUILD_PATH=dist
SOURCE_MAP=true
MINIFY=true

# ==============================================
# üåç LOCALIZATION
# ==============================================
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,es,pt
TIMEZONE=UTC

# ==============================================
# üìä PERFORMANCE
# ==============================================
MAX_REQUEST_SIZE=10mb
REQUEST_TIMEOUT=30000
CONNECTION_POOL_SIZE=20

# ==============================================
# üîß DEPLOYMENT CONFIGURATION
# ==============================================
# Container/Orchestration
CONTAINER_REGISTRY=registry.myapp.com
IMAGE_TAG=staging-latest

# Health Checks
HEALTH_CHECK_INTERVAL=30000
READINESS_PROBE_PATH=/api/health
LIVENESS_PROBE_PATH=/api/health/live

# Auto-scaling
MIN_REPLICAS=2
MAX_REPLICAS=5
TARGET_CPU_UTILIZATION=70

# ==============================================
# üåê CDN & ASSETS
# ==============================================
CDN_URL=https://cdn-staging.myapp.com
ASSETS_URL=https://assets-staging.myapp.com
PUBLIC_URL=https://staging.myapp.com

# ==============================================
# üîí SSL/TLS
# ==============================================
SSL_ENABLED=true
FORCE_HTTPS=true
SSL_CERT_PATH=/etc/ssl/certs/staging.crt
SSL_KEY_PATH=/etc/ssl/private/staging.key

# ==============================================
# üìä BACKUP & DISASTER RECOVERY
# ==============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=myapp-staging-backups
